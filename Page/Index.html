<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediClinic - Sistema de Gest√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; }
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-indigo-100 min-h-screen">
    <!-- Header -->
    <header class="bg-white shadow-lg border-b-4 border-blue-500">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-lg">M</span>
                    </div>
                    <h1 class="text-2xl font-bold text-gray-800">MediClinic</h1>
                </div>
                <div class="text-sm text-gray-600">
                    <span id="currentDate"></span>
                </div>
            </div>
        </div>
    </header>

    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
        <!-- Navigation -->
        <nav class="mb-8">
            <div class="flex flex-wrap gap-2 bg-white rounded-xl p-2 shadow-md">
                <button onclick="showSection('dashboard')" class="nav-btn bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-all hover:bg-blue-700">
                    üìä Dashboard
                </button>
                <button onclick="showSection('pacientes')" class="nav-btn bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-all hover:bg-gray-200">
                    üë• Pacientes
                </button>
                <button onclick="showSection('medicos')" class="nav-btn bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-all hover:bg-gray-200">
                    üë®‚Äç‚öïÔ∏è M√©dicos
                </button>
                <button onclick="showSection('consultas')" class="nav-btn bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-all hover:bg-gray-200">
                    üìÖ Consultas
                </button>
                <button onclick="showSection('ambulatorios')" class="nav-btn bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-all hover:bg-gray-200">
                    üè• Ambulat√≥rios
                </button>
                <button onclick="showSection('funcionarios')" class="nav-btn bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-all hover:bg-gray-200">
                    üëî Funcion√°rios
                </button>
            </div>
        </nav>

        <!-- Dashboard Section -->
        <div id="dashboard" class="section fade-in">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl p-6 shadow-md border-l-4 border-blue-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Pacientes Ativos</p>
                            <p class="text-3xl font-bold text-gray-800" id="totalPacientes">0</p>
                        </div>
                        <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                            <span class="text-2xl">üë•</span>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl p-6 shadow-md border-l-4 border-green-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Consultas Hoje</p>
                            <p class="text-3xl font-bold text-gray-800" id="consultasHoje">0</p>
                        </div>
                        <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                            <span class="text-2xl">üìÖ</span>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl p-6 shadow-md border-l-4 border-purple-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">M√©dicos Ativos</p>
                            <p class="text-3xl font-bold text-gray-800" id="totalMedicos">0</p>
                        </div>
                        <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                            <span class="text-2xl">üë®‚Äç‚öïÔ∏è</span>
                        </div>
                    </div>
                </div>
                <div class="bg-white rounded-xl p-6 shadow-md border-l-4 border-orange-500">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-gray-600 text-sm">Ambulat√≥rios</p>
                            <p class="text-3xl font-bold text-gray-800" id="totalAmbulatorios">0</p>
                        </div>
                        <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                            <span class="text-2xl">üè•</span>
                        </div>
                    </div>
                </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">Pr√≥ximas Consultas</h3>
                    <div id="proximasConsultas" class="space-y-3">
                        <p class="text-gray-500 text-center py-4">Nenhuma consulta agendada</p>
                    </div>
                </div>
                <div class="bg-white rounded-xl p-6 shadow-md">
                    <h3 class="text-lg font-semibold text-gray-800 mb-4">A√ß√µes R√°pidas</h3>
                    <div class="grid grid-cols-2 gap-3">
                        <button onclick="showAddModal('pacientes')" class="bg-blue-50 hover:bg-blue-100 text-blue-700 p-4 rounded-lg text-center transition-all">
                            <div class="text-2xl mb-2">üë•</div>
                            <div class="text-sm font-medium">Novo Paciente</div>
                        </button>
                        <button onclick="showAddModal('consultas')" class="bg-green-50 hover:bg-green-100 text-green-700 p-4 rounded-lg text-center transition-all">
                            <div class="text-2xl mb-2">üìÖ</div>
                            <div class="text-sm font-medium">Nova Consulta</div>
                        </button>
                        <button onclick="showAddModal('medicos')" class="bg-purple-50 hover:bg-purple-100 text-purple-700 p-4 rounded-lg text-center transition-all">
                            <div class="text-2xl mb-2">üë®‚Äç‚öïÔ∏è</div>
                            <div class="text-sm font-medium">Novo M√©dico</div>
                        </button>
                        <button onclick="showAddModal('ambulatorios')" class="bg-orange-50 hover:bg-orange-100 text-orange-700 p-4 rounded-lg text-center transition-all">
                            <div class="text-2xl mb-2">üè•</div>
                            <div class="text-sm font-medium">Novo Ambulat√≥rio</div>
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pacientes Section -->
        <div id="pacientes" class="section hidden fade-in">
            <div class="bg-white rounded-xl shadow-md">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-semibold text-gray-800">Gest√£o de Pacientes</h2>
                        <button onclick="showAddModal('pacientes')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all">
                            + Novo Paciente
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <input type="text" id="searchPacientes" placeholder="Buscar pacientes..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onkeyup="filterTable('pacientesTable', this.value)">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Nome</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">CPF</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Telefone</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Email</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="pacientesTable" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="5" class="px-4 py-8 text-center text-gray-500">Nenhum paciente cadastrado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- M√©dicos Section -->
        <div id="medicos" class="section hidden fade-in">
            <div class="bg-white rounded-xl shadow-md">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-semibold text-gray-800">Gest√£o de M√©dicos</h2>
                        <button onclick="showAddModal('medicos')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all">
                            + Novo M√©dico
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <input type="text" id="searchMedicos" placeholder="Buscar m√©dicos..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onkeyup="filterTable('medicosTable', this.value)">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Nome</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">CRM</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Especialidade</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Telefone</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="medicosTable" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="5" class="px-4 py-8 text-center text-gray-500">Nenhum m√©dico cadastrado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Consultas Section -->
        <div id="consultas" class="section hidden fade-in">
            <div class="bg-white rounded-xl shadow-md">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-semibold text-gray-800">Gest√£o de Consultas</h2>
                        <button onclick="showAddModal('consultas')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all">
                            + Nova Consulta
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <input type="text" id="searchConsultas" placeholder="Buscar consultas..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onkeyup="filterTable('consultasTable', this.value)">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Data/Hora</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Paciente</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">M√©dico</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Ambulat√≥rio</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Status</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="consultasTable" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="6" class="px-4 py-8 text-center text-gray-500">Nenhuma consulta agendada</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ambulat√≥rios Section -->
        <div id="ambulatorios" class="section hidden fade-in">
            <div class="bg-white rounded-xl shadow-md">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-semibold text-gray-800">Gest√£o de Ambulat√≥rios</h2>
                        <button onclick="showAddModal('ambulatorios')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all">
                            + Novo Ambulat√≥rio
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <input type="text" id="searchAmbulatorios" placeholder="Buscar ambulat√≥rios..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onkeyup="filterTable('ambulatoriosTable', this.value)">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Nome</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Localiza√ß√£o</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Capacidade</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Status</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="ambulatoriosTable" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="5" class="px-4 py-8 text-center text-gray-500">Nenhum ambulat√≥rio cadastrado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Funcion√°rios Section -->
        <div id="funcionarios" class="section hidden fade-in">
            <div class="bg-white rounded-xl shadow-md">
                <div class="p-6 border-b border-gray-200">
                    <div class="flex justify-between items-center">
                        <h2 class="text-xl font-semibold text-gray-800">Gest√£o de Funcion√°rios</h2>
                        <button onclick="showAddModal('funcionarios')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg font-medium transition-all">
                            + Novo Funcion√°rio
                        </button>
                    </div>
                </div>
                <div class="p-6">
                    <div class="mb-4">
                        <input type="text" id="searchFuncionarios" placeholder="Buscar funcion√°rios..." class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" onkeyup="filterTable('funcionariosTable', this.value)">
                    </div>
                    <div class="overflow-x-auto">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Nome</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Cargo</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Departamento</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">Telefone</th>
                                    <th class="px-4 py-3 text-left text-sm font-medium text-gray-700">A√ß√µes</th>
                                </tr>
                            </thead>
                            <tbody id="funcionariosTable" class="divide-y divide-gray-200">
                                <tr>
                                    <td colspan="5" class="px-4 py-8 text-center text-gray-500">Nenhum funcion√°rio cadastrado</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal -->
    <div id="modal" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center z-50">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 id="modalTitle" class="text-lg font-semibold text-gray-800"></h3>
                <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 text-2xl">&times;</button>
            </div>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Data storage
        let data = {
            pacientes: [],
            medicos: [],
            consultas: [],
            ambulatorios: [],
            funcionarios: []
        };

        // Initialize app
        document.addEventListener('DOMContentLoaded', function() {
            updateCurrentDate();
            updateDashboard();
            loadSampleData();
        });

        function updateCurrentDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('pt-BR', options);
        }

        function loadSampleData() {
            // Sample data for demonstration
            data.pacientes = [
                { id: 1, nome: 'Maria Silva', cpf: '123.456.789-00', telefone: '(11) 99999-9999', email: 'maria@email.com' },
                { id: 2, nome: 'Jo√£o Santos', cpf: '987.654.321-00', telefone: '(11) 88888-8888', email: 'joao@email.com' }
            ];
            
            data.medicos = [
                { id: 1, nome: 'Dr. Carlos Oliveira', crm: 'CRM/SP 123456', especialidade: 'Cardiologia', telefone: '(11) 77777-7777' },
                { id: 2, nome: 'Dra. Ana Costa', crm: 'CRM/SP 654321', especialidade: 'Pediatria', telefone: '(11) 66666-6666' }
            ];
            
            data.ambulatorios = [
                { id: 1, nome: 'Ambulat√≥rio A', localizacao: '1¬∫ Andar - Ala Norte', capacidade: 20, status: 'Ativo' },
                { id: 2, nome: 'Ambulat√≥rio B', localizacao: '2¬∫ Andar - Ala Sul', capacidade: 15, status: 'Ativo' }
            ];
            
            data.funcionarios = [
                { id: 1, nome: 'Pedro Almeida', cargo: 'Recepcionista', departamento: 'Atendimento', telefone: '(11) 55555-5555' },
                { id: 2, nome: 'Lucia Ferreira', cargo: 'Enfermeira', departamento: 'Enfermagem', telefone: '(11) 44444-4444' }
            ];
            
            data.consultas = [
                { id: 1, dataHora: '2024-01-15 14:00', pacienteId: 1, medicoId: 1, ambulatorioId: 1, status: 'Agendada' },
                { id: 2, dataHora: '2024-01-15 15:30', pacienteId: 2, medicoId: 2, ambulatorioId: 2, status: 'Agendada' }
            ];
            
            updateAllTables();
            updateDashboard();
        }

        function showSection(sectionName) {
            // Hide all sections
            document.querySelectorAll('.section').forEach(section => {
                section.classList.add('hidden');
            });
            
            // Show selected section
            document.getElementById(sectionName).classList.remove('hidden');
            
            // Update navigation buttons
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.className = 'nav-btn bg-gray-100 text-gray-700 px-6 py-3 rounded-lg font-medium transition-all hover:bg-gray-200';
            });
            
            event.target.className = 'nav-btn bg-blue-600 text-white px-6 py-3 rounded-lg font-medium transition-all hover:bg-blue-700';
        }

        function updateDashboard() {
            document.getElementById('totalPacientes').textContent = data.pacientes.length;
            document.getElementById('totalMedicos').textContent = data.medicos.length;
            document.getElementById('totalAmbulatorios').textContent = data.ambulatorios.length;
            
            // Count today's consultations
            const today = new Date().toISOString().split('T')[0];
            const consultasHoje = data.consultas.filter(c => c.dataHora.startsWith(today)).length;
            document.getElementById('consultasHoje').textContent = consultasHoje;
            
            updateProximasConsultas();
        }

        function updateProximasConsultas() {
            const container = document.getElementById('proximasConsultas');
            const proximasConsultas = data.consultas
                .filter(c => new Date(c.dataHora) >= new Date())
                .sort((a, b) => new Date(a.dataHora) - new Date(b.dataHora))
                .slice(0, 5);
            
            if (proximasConsultas.length === 0) {
                container.innerHTML = '<p class="text-gray-500 text-center py-4">Nenhuma consulta agendada</p>';
                return;
            }
            
            container.innerHTML = proximasConsultas.map(consulta => {
                const paciente = data.pacientes.find(p => p.id === consulta.pacienteId);
                const medico = data.medicos.find(m => m.id === consulta.medicoId);
                const dataHora = new Date(consulta.dataHora);
                
                return `
                    <div class="flex items-center justify-between p-3 bg-gray-50 rounded-lg">
                        <div>
                            <p class="font-medium text-gray-800">${paciente?.nome || 'Paciente n√£o encontrado'}</p>
                            <p class="text-sm text-gray-600">${medico?.nome || 'M√©dico n√£o encontrado'}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-sm font-medium text-gray-800">${dataHora.toLocaleDateString('pt-BR')}</p>
                            <p class="text-sm text-gray-600">${dataHora.toLocaleTimeString('pt-BR', {hour: '2-digit', minute: '2-digit'})}</p>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function showAddModal(type) {
            const modal = document.getElementById('modal');
            const modalTitle = document.getElementById('modalTitle');
            const modalContent = document.getElementById('modalContent');
            
            const titles = {
                pacientes: 'Novo Paciente',
                medicos: 'Novo M√©dico',
                consultas: 'Nova Consulta',
                ambulatorios: 'Novo Ambulat√≥rio',
                funcionarios: 'Novo Funcion√°rio'
            };
            
            modalTitle.textContent = titles[type];
            modalContent.innerHTML = getModalForm(type);
            modal.classList.remove('hidden');
            modal.classList.add('flex');
        }

        function getModalForm(type) {
            const forms = {
                pacientes: `
                    <form onsubmit="addItem('pacientes', event)">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                                <input type="text" name="nome" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">CPF</label>
                                <input type="text" name="cpf" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                                <input type="text" name="telefone" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
                                <input type="email" name="email" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" onclick="closeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-all">Cancelar</button>
                            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">Salvar</button>
                        </div>
                    </form>
                `,
                medicos: `
                    <form onsubmit="addItem('medicos', event)">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                                <input type="text" name="nome" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">CRM</label>
                                <input type="text" name="crm" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Especialidade</label>
                                <input type="text" name="especialidade" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                                <input type="text" name="telefone" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" onclick="closeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-all">Cancelar</button>
                            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">Salvar</button>
                        </div>
                    </form>
                `,
                consultas: `
                    <form onsubmit="addItem('consultas', event)">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Data e Hora</label>
                                <input type="datetime-local" name="dataHora" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Paciente</label>
                                <select name="pacienteId" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione um paciente</option>
                                    ${data.pacientes.map(p => `<option value="${p.id}">${p.nome}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">M√©dico</label>
                                <select name="medicoId" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione um m√©dico</option>
                                    ${data.medicos.map(m => `<option value="${m.id}">${m.nome}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Ambulat√≥rio</label>
                                <select name="ambulatorioId" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="">Selecione um ambulat√≥rio</option>
                                    ${data.ambulatorios.map(a => `<option value="${a.id}">${a.nome}</option>`).join('')}
                                </select>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                <select name="status" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="Agendada">Agendada</option>
                                    <option value="Confirmada">Confirmada</option>
                                    <option value="Realizada">Realizada</option>
                                    <option value="Cancelada">Cancelada</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" onclick="closeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-all">Cancelar</button>
                            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">Salvar</button>
                        </div>
                    </form>
                `,
                ambulatorios: `
                    <form onsubmit="addItem('ambulatorios', event)">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nome</label>
                                <input type="text" name="nome" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Localiza√ß√£o</label>
                                <input type="text" name="localizacao" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Capacidade</label>
                                <input type="number" name="capacidade" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Status</label>
                                <select name="status" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                                    <option value="Ativo">Ativo</option>
                                    <option value="Inativo">Inativo</option>
                                    <option value="Manuten√ß√£o">Manuten√ß√£o</option>
                                </select>
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" onclick="closeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-all">Cancelar</button>
                            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">Salvar</button>
                        </div>
                    </form>
                `,
                funcionarios: `
                    <form onsubmit="addItem('funcionarios', event)">
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Nome Completo</label>
                                <input type="text" name="nome" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Cargo</label>
                                <input type="text" name="cargo" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Departamento</label>
                                <input type="text" name="departamento" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-1">Telefone</label>
                                <input type="text" name="telefone" required class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                            </div>
                        </div>
                        <div class="flex justify-end space-x-3 mt-6">
                            <button type="button" onclick="closeModal()" class="px-4 py-2 text-gray-600 hover:text-gray-800 transition-all">Cancelar</button>
                            <button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg transition-all">Salvar</button>
                        </div>
                    </form>
                `
            };
            
            return forms[type];
        }

        function addItem(type, event) {
            event.preventDefault();
            const formData = new FormData(event.target);
            const newItem = {};
            
            for (let [key, value] of formData.entries()) {
                newItem[key] = value;
            }
            
            // Generate ID
            newItem.id = data[type].length > 0 ? Math.max(...data[type].map(item => item.id)) + 1 : 1;
            
            // Convert string IDs to numbers for foreign keys
            if (type === 'consultas') {
                newItem.pacienteId = parseInt(newItem.pacienteId);
                newItem.medicoId = parseInt(newItem.medicoId);
                newItem.ambulatorioId = parseInt(newItem.ambulatorioId);
            }
            
            data[type].push(newItem);
            updateTable(type);
            updateDashboard();
            closeModal();
        }

        function deleteItem(type, id) {
            if (confirm('Tem certeza que deseja excluir este item?')) {
                data[type] = data[type].filter(item => item.id !== id);
                updateTable(type);
                updateDashboard();
            }
        }

        function updateTable(type) {
            const tableBody = document.getElementById(type + 'Table');
            
            if (data[type].length === 0) {
                tableBody.innerHTML = `<tr><td colspan="6" class="px-4 py-8 text-center text-gray-500">Nenhum ${type.slice(0, -1)} cadastrado</td></tr>`;
                return;
            }
            
            const rows = {
                pacientes: (item) => `
                    <tr>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.nome}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.cpf}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.telefone}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.email}</td>
                        <td class="px-4 py-3 text-sm">
                            <button onclick="deleteItem('pacientes', ${item.id})" class="text-red-600 hover:text-red-800 transition-all">Excluir</button>
                        </td>
                    </tr>
                `,
                medicos: (item) => `
                    <tr>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.nome}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.crm}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.especialidade}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.telefone}</td>
                        <td class="px-4 py-3 text-sm">
                            <button onclick="deleteItem('medicos', ${item.id})" class="text-red-600 hover:text-red-800 transition-all">Excluir</button>
                        </td>
                    </tr>
                `,
                consultas: (item) => {
                    const paciente = data.pacientes.find(p => p.id === item.pacienteId);
                    const medico = data.medicos.find(m => m.id === item.medicoId);
                    const ambulatorio = data.ambulatorios.find(a => a.id === item.ambulatorioId);
                    const dataHora = new Date(item.dataHora);
                    
                    return `
                        <tr>
                            <td class="px-4 py-3 text-sm text-gray-900">${dataHora.toLocaleString('pt-BR')}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">${paciente?.nome || 'N/A'}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">${medico?.nome || 'N/A'}</td>
                            <td class="px-4 py-3 text-sm text-gray-900">${ambulatorio?.nome || 'N/A'}</td>
                            <td class="px-4 py-3 text-sm">
                                <span class="px-2 py-1 text-xs rounded-full ${getStatusColor(item.status)}">${item.status}</span>
                            </td>
                            <td class="px-4 py-3 text-sm">
                                <button onclick="deleteItem('consultas', ${item.id})" class="text-red-600 hover:text-red-800 transition-all">Excluir</button>
                            </td>
                        </tr>
                    `;
                },
                ambulatorios: (item) => `
                    <tr>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.nome}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.localizacao}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.capacidade}</td>
                        <td class="px-4 py-3 text-sm">
                            <span class="px-2 py-1 text-xs rounded-full ${getStatusColor(item.status)}">${item.status}</span>
                        </td>
                        <td class="px-4 py-3 text-sm">
                            <button onclick="deleteItem('ambulatorios', ${item.id})" class="text-red-600 hover:text-red-800 transition-all">Excluir</button>
                        </td>
                    </tr>
                `,
                funcionarios: (item) => `
                    <tr>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.nome}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.cargo}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.departamento}</td>
                        <td class="px-4 py-3 text-sm text-gray-900">${item.telefone}</td>
                        <td class="px-4 py-3 text-sm">
                            <button onclick="deleteItem('funcionarios', ${item.id})" class="text-red-600 hover:text-red-800 transition-all">Excluir</button>
                        </td>
                    </tr>
                `
            };
            
            tableBody.innerHTML = data[type].map(rows[type]).join('');
        }

        function updateAllTables() {
            ['pacientes', 'medicos', 'consultas', 'ambulatorios', 'funcionarios'].forEach(updateTable);
        }

        function getStatusColor(status) {
            const colors = {
                'Agendada': 'bg-blue-100 text-blue-800',
                'Confirmada': 'bg-green-100 text-green-800',
                'Realizada': 'bg-gray-100 text-gray-800',
                'Cancelada': 'bg-red-100 text-red-800',
                'Ativo': 'bg-green-100 text-green-800',
                'Inativo': 'bg-red-100 text-red-800',
                'Manuten√ß√£o': 'bg-yellow-100 text-yellow-800'
            };
            return colors[status] || 'bg-gray-100 text-gray-800';
        }

        function filterTable(tableId, searchTerm) {
            const table = document.getElementById(tableId);
            const rows = table.getElementsByTagName('tr');
            
            for (let i = 0; i < rows.length; i++) {
                const row = rows[i];
                const cells = row.getElementsByTagName('td');
                let found = false;
                
                for (let j = 0; j < cells.length - 1; j++) { // Exclude actions column
                    if (cells[j].textContent.toLowerCase().includes(searchTerm.toLowerCase())) {
                        found = true;
                        break;
                    }
                }
                
                row.style.display = found ? '' : 'none';
            }
        }

        function closeModal() {
            const modal = document.getElementById('modal');
            modal.classList.add('hidden');
            modal.classList.remove('flex');
        }

        // Close modal when clicking outside
        document.getElementById('modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'981a49e346fb5e0f',t:'MTc1ODI5NzU0OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
